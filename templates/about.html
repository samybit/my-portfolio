{% extends "base.html" %}

{% block title %}About - Samy Barsoum{% endblock %}

{% block body_class %}bg-about{% endblock %}

{% block content %}
<canvas id="renderCanvas" style="opacity: 0; transition: opacity 2s ease;"></canvas>

<div class="container py-5">
  <div class="row align-items-center mb-5">

    <div class="col-md-7">
      <h1 class="display-4 fw-bold mb-4">About Me.</h1>
      <p class="lead text-secondary mb-4">
        I am a Full Stack Developer based in Egypt, bridging the gap between modern JavaScript interfaces and powerful
        Python backends.
      </p>
      <p class="text-secondary">
        My journey began with Python automation and scripting, where I built tools to scrape data and automate tasks. I
        then expanded into full-stack development, mastering the MERN stack to build dynamic web applications.
      </p>
      <p class="text-secondary">
        Today, I focus on building complete, containerized applications using Docker, ensuring that what runs on my
        machine runs everywhere.
      </p>
      <p class="text-secondary">
        When I'm not coding, you can find me exploring retro tech, playing classic games,
        or experimenting with 3D web graphics.
      </p>
    </div>

    <div class="col-md-5 text-center mt-4 mt-md-0">
      <div class="ratio ratio-1x1 rounded-circle overflow-hidden border border-secondary mx-auto"
        style="max-width: 400px;">
        <img src="{{ url_for('static', filename='images/me.jpg') }}" alt="My Photo" class="bw-img"
          style="object-fit: cover; width: 100%; height: 100%;">
      </div>
    </div>
  </div>

  <div class="row mt-5">

    <div class="col-lg-6 mb-4" data-aos="fade-right">
      <h3 class="fw-bold border-bottom border-secondary pb-3 mb-4">
        <i class="bi bi-mortarboard-fill me-2 text-secondary"></i> Education
      </h3>

      <div class="glass-project p-4 rounded-3 border border-secondary mb-3">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h5 class="fw-bold mb-1">Bachelor of Business Admin. (BBA)</h5>
            <p class="text-secondary mb-0">Ain Shams University</p>
          </div>
          <span class="badge border border-secondary text-secondary">2019 - 2023</span>
        </div>
        <p class="small text-secondary mt-3 mb-0">
          Developed a foundation in projects logic, management, problem-solving
          and a strategic mindset for system architecture and resource management. 
          This allows me to translate business requirements into 
          efficient, scalable technical solutions.
        </p>
      </div>

    </div>

    <div class="col-lg-6 mb-4" data-aos="fade-left">
      <h3 class="fw-bold border-bottom border-secondary pb-3 mb-4">
        <i class="bi bi-patch-check-fill me-2 text-secondary"></i> Certifications
      </h3>

      <div class="glass-project p-3 rounded-3 border border-secondary mb-3 d-flex align-items-center gap-3">
        <div class="fs-1 text-secondary"><i class="bi bi-box-seam"></i></div>
        <div>
          <h6 class="fw-bold mb-0">MERN Stack Development & AI Fundamentals</h6>
          <small class="text-secondary">ITI</small>
        </div>
      </div>

      <div class="glass-project p-3 rounded-3 border border-secondary mb-3 d-flex align-items-center gap-3">
        <div class="fs-1 text-secondary"><i class="bi bi-cloud-check"></i></div>
        <div>
          <h6 class="fw-bold mb-0">Database Fundamentals</h6>
          <small class="text-secondary">egFWD</small>
        </div>
      </div>

      <div class="glass-project p-3 rounded-3 border border-secondary mb-3 d-flex align-items-center gap-3">
        <div class="fs-1 text-secondary"><i class="bi bi-filetype-py"></i></div>
        <div>
          <h6 class="fw-bold mb-0">Introduction to Computer Science</h6>
          <small class="text-secondary">CS50x - Harvard University</small>
        </div>
      </div>

    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12 mb-4">
      <h3 class="fw-bold border-bottom border-secondary pb-3 mb-4">Technical Arsenal</h3>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Frontend & UI</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">React.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Angular</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">JavaScript (ES6+)</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">HTML5 & CSS3</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Bootstrap 5</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Figma</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Backend & Database</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Python</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Node.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Express.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Flask</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">MongoDB</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">WTForms</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">DevOps & Tools</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Docker</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Git / GitHub</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Linux OS</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Nexus Repo Manager</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Automation & Scripting</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Selenium</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">BeautifulSoup</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Tkinter (GUI)</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">REST APIs</span>
      </div>
    </div>
  </div>

</div>

<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const canvas = document.getElementById("renderCanvas");
    if (!canvas) return;

    // --- SCROLL TO REVEAL ---
    function checkScrollReveal() {
      // Trigger when user is close to bottom
      // Adjusted offset for mobile scrolling feel
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 500) {
        canvas.style.opacity = "1";
        // Remove listener so it stays visible once triggered
        window.removeEventListener("scroll", checkScrollReveal);
      }
    }

    window.addEventListener("scroll", checkScrollReveal);

    // --- BABYLON ENGINE ---
    const engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
    // "Render at 1.33 resolution" (1 / 0.75 â‰ƒ 1.33)
    engine.setHardwareScalingLevel(0.75);

    const createScene = function () {
      const scene = new BABYLON.Scene(engine);
      scene.clearColor = new BABYLON.Color4(0, 0, 0, 0); // Transparent

      const camera = new BABYLON.UniversalCamera("camera", new BABYLON.Vector3(0, 0, -15), scene);
      camera.setTarget(BABYLON.Vector3.Zero());

      const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
      light.intensity = 2;

      // --- CREATE SHAPES ---
      const shapes = [];
      const shapeCount = 3;

      const mat = new BABYLON.StandardMaterial("mat", scene);
      mat.wireframe = true;
      mat.emissiveColor = new BABYLON.Color3(0, 1, 0.8);
      mat.alpha = 0.4;

      for (let i = 0; i < shapeCount; i++) {
        // Abstract Torus Knot
        const mesh = BABYLON.MeshBuilder.CreateTorusKnot("shape" + i, {
          radius: 1.00,
          tube: 0.3,
          radialSegments: 64,
          tubularSegments: 8,
          p: 2,
          q: 3
        }, scene);
        mesh.material = mat;

        // Position Y: i=0 is Bottom (-5), i=1 is Middle (0), i=2 is Top (5)
        mesh.position.y = (i - 1) * 5;
        mesh.position.z = 0;

        mesh.rotationSpeed = new BABYLON.Vector3(
          Math.random() * 0.02 + 0.01,
          Math.random() * 0.02 + 0.01,
          0
        );

        shapes.push(mesh);
      }

      // --- RESPONSIVE LOGIC ---
      function updateShapePositions() {
        const isMobile = window.innerWidth < 992;

        shapes.forEach((mesh, i) => {
          if (isMobile) {
            // MOBILE VIEW:
            // 1. Center the shape
            mesh.position.x = 0;
            mesh.position.z = 2;

            // 2. Hide Top & Middle (i=1, i=2), Keep Bottom (i=0)
            if (i === 0) {
              mesh.setEnabled(true); // Show Bottom
            } else {
              mesh.setEnabled(false); // Hide others
            }

          } else {
            // DESKTOP VIEW:
            // 1. Move to Right
            mesh.position.x = 10;
            mesh.position.z = 0;

            // 2. Show ALL
            mesh.setEnabled(true);
          }
        });
      }

      // Initial Call
      updateShapePositions();

      // --- MOUSE & ANIMATION ---
      let mouseX = 0;
      let mouseY = 0;

      // Track Mouse Position
      window.addEventListener("mousemove", function (e) {
        // Normalize mouse position from -1 to 1
        mouseX = (e.clientX / window.innerWidth) * 2 - 1;
        mouseY = (e.clientY / window.innerHeight) * 2 - 1;
      });

      scene.registerBeforeRender(function () {
        for (let i = 0; i < shapes.length; i++) {
          const m = shapes[i];
          // Skip logic if hidden
          if (!m.isEnabled()) continue;

          // 1. Base Spin
          m.rotation.x += m.rotationSpeed.x;
          m.rotation.y += m.rotationSpeed.y;

          // 2. Float gently
          m.position.y += Math.sin(Date.now() * 0.002 + i) * 0.02;

          // 3. MOUSE INTERACTION (Tilt towards mouse)
          // add a small rotation offset based on mouse position
          m.rotation.y += mouseX * 0.2;
          m.rotation.x += mouseY * 0.2;
        }
      });

      // Scroll Spin Boost
      window.addEventListener("scroll", () => {
        for (let i = 0; i < shapes.length; i++) {
          shapes[i].rotation.y += 0.25;
        }
      });

      // Make `updateShapePositions` available to the resize event
      scene.updateShapePositions = updateShapePositions;

      return scene;
    };

    const scene = createScene();

    engine.runRenderLoop(function () {
      scene.render();
    });

    window.addEventListener("resize", function () {
      engine.resize();
      // Update positions when screen size changes (rotate phone etc)
      if (scene.updateShapePositions) scene.updateShapePositions();
    });
  });
</script>
{% endblock %}