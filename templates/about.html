{% extends "base.html" %}

{% block title %}About - Samy Barsoum{% endblock %}

{% block body_class %}bg-about{% endblock %}

{% block content %}
<canvas id="renderCanvas" style="opacity: 0; transition: opacity 2s ease;"></canvas>

<div class="container py-5">
  <div class="row align-items-center mb-5">

    <div class="col-md-7">
      <h1 class="display-4 fw-bold mb-4">About Me.</h1>
      <p class="lead text-secondary mb-4">
        I am a Full Stack Developer based in Egypt, bridging the gap between modern JavaScript interfaces and powerful
        Python backends.
      </p>
      <p class="text-secondary">
        My journey began with Python automation and scripting, where I built tools to scrape data and automate tasks. I
        then expanded into full-stack development, mastering the MERN stack to build dynamic web applications.
      </p>
      <p class="text-secondary">
        Today, I focus on building complete, containerized applications using Docker, ensuring that what runs on my
        machine runs everywhere.
      </p>
      <p class="text-secondary">
        When I'm not coding, you can find me exploring retro tech, playing classic games,
        or experimenting with 3D web graphics.
      </p>
    </div>

    <div class="col-md-5 text-center mt-4 mt-md-0">
      <div class="ratio ratio-1x1 rounded-circle overflow-hidden border border-secondary mx-auto"
        style="max-width: 400px;">
        <img src="{{ url_for('static', filename='images/me.jpg') }}" alt="My Photo" class="bw-img"
          style="object-fit: cover; width: 100%; height: 100%;">
      </div>
    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12 mb-4">
      <h3 class="fw-bold border-bottom border-secondary pb-3 mb-4">Technical Arsenal</h3>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Frontend & UI</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">React.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Angular</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">JavaScript (ES6+)</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">HTML5 & CSS3</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Bootstrap 5</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Figma</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Backend & Database</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Python</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Node.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Express.js</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Flask</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">MongoDB</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">WTForms</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">DevOps & Tools</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Docker</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Git / GitHub</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Linux OS</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Nexus Repo Manager</span>
      </div>
    </div>

    <div class="col-md-6 mb-5">
      <h5 class="text-white mb-3">Automation & Scripting</h5>
      <div class="d-flex gap-2 flex-wrap">
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Selenium</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">BeautifulSoup</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">Tkinter (GUI)</span>
        <span class="badge bg-transparent border border-secondary text-secondary p-2">REST APIs</span>
      </div>
    </div>
  </div>

</div>

<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const canvas = document.getElementById("renderCanvas");
    if (!canvas) return;

    // --- SCROLL TO REVEAL ---
    // check scroll position
    function checkScrollReveal() {
      // trigger when user is within 100px of the bottom
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 400) {
        // Reveal the canvas
        canvas.style.opacity = "1";
        // Remove listener so it stays visible once triggered
        window.removeEventListener("scroll", checkScrollReveal);
      }
    }

    // Attach the listener
    window.addEventListener("scroll", checkScrollReveal);
    // -----------------------------------

    const engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });

    const createScene = function () {
      const scene = new BABYLON.Scene(engine);
      scene.clearColor = new BABYLON.Color4(0, 0, 0, 0); // Transparent

      const camera = new BABYLON.UniversalCamera("camera", new BABYLON.Vector3(0, 0, -15), scene);
      camera.setTarget(BABYLON.Vector3.Zero());

      const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
      light.intensity = 2;

      // --- CREATE 3 SHAPES ON THE RIGHT ---
      const shapes = [];
      const shapeCount = 3;

      const mat = new BABYLON.StandardMaterial("mat", scene);
      mat.wireframe = true;
      mat.emissiveColor = new BABYLON.Color3(0, 1, 0.8); // Cyan Glow
      mat.alpha = 0.4;

      for (let i = 0; i < shapeCount; i++) {
        // Abstract Torus Knot
        const mesh = BABYLON.MeshBuilder.CreateTorusKnot("shape" + i, {
          radius: 1.01,           // Overall size
          tube: 0.3,           // Thickness of the "rope"
          radialSegments: 74,  // Smoothness around the tube
          tubularSegments: 8,  // Low segments here makes it look angular/techy in wireframe
          p: 2,                // Winding number 1
          q: 3                 // Winding number 2
        }, scene);
        mesh.material = mat;

        // POSITION: Vertical Column on the Right
        // x = 7 (Right side), y = spread (5, 0, -5)
        mesh.position.x = 8;
        mesh.position.y = (i - 1) * 5; // Spacing: Top(6), Middle(0), Bottom(-6)
        mesh.position.z = 0;

        mesh.rotationSpeed = new BABYLON.Vector3(
          Math.random() * 0.02 + 0.01, // Faster X
          Math.random() * 0.02 + 0.01, // Faster Y
          0
        );

        shapes.push(mesh);
      }

      // --- MOUSE INTERACTION VARIABLES ---
      let mouseX = 0;
      let mouseY = 0;

      // Track Mouse Position
      window.addEventListener("mousemove", function (e) {
        // Normalize mouse position from -1 to 1
        mouseX = (e.clientX / window.innerWidth) * 2 - 1;
        mouseY = (e.clientY / window.innerHeight) * 2 - 1;
      });

      scene.registerBeforeRender(function () {
        for (let i = 0; i < shapes.length; i++) {
          const m = shapes[i];

          // 1. Base Spin
          m.rotation.x += m.rotationSpeed.x;
          m.rotation.y += m.rotationSpeed.y;

          // 2. Float gently
          m.position.y += Math.sin(Date.now() * 0.002 + i) * 0.02;

          // 3. MOUSE INTERACTION (Tilt towards mouse)
          // add a small rotation offset based on mouse position
          m.rotation.y += mouseX * 0.2;
          m.rotation.x += mouseY * 0.2;
        }
      });

      // Scroll Spin Boost
      window.addEventListener("scroll", () => {
        for (let i = 0; i < shapes.length; i++) {
          shapes[i].rotation.y += 0.25; // Hard spin on scroll
        }
      });

      return scene;
    };

    const scene = createScene();

    engine.runRenderLoop(function () {
      scene.render();
    });

    window.addEventListener("resize", function () {
      engine.resize();
    });
  });
</script>
{% endblock %}